{% extends 'admin/master.html' %}
{% import 'admin/lib.html' as lib with context %}
{% import 'admin/static.html' as admin_static with context %}
{% import 'admin/model/layout.html' as model_layout with context %}

{% block head %}
	{{ super() }}
{% endblock %}

{% block body %}
	<h2>Processes Status</h2>
	{% block model_menu_bar %}
	{% endblock %}

	{% block model_list_table %}
		<table class='table table-striped table-bordered table-hover model-list'>
			<thead>
				<tr>
					<th class='column-header'>Name</th>
					<th class='column-header'>Running</th>
					<th class='column-header'>Current Task</th>
					<th class='column-header'>Last Successful</th>
					<th class='column-header'>Last Failed</th>
					<th class='column-header'>Next Scheduled</th>
				</tr>
			</thead>

			{% for dag in data %}
				<tr>
					<td>{{ dag.name }}</td>
					<td>{{ dag.currently_running }}</td>
					<td>task name if running, else "not running"</td>
					<td>date of last successful run</td>
					<td>date of last failed run</td>
					<td>date of next scheduled run</td>
				</tr>
			{% endfor %}
		</table>
	{% endblock %}

{% endblock %}

{% block tail %}
	{{ super() }}
	<script src='{{ admin_static.url(filename="admin/js/filters.js") }}'></script>
	{{ lib.form_js() }}
{% endblock %}
